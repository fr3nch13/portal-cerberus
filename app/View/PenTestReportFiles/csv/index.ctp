<?php 
// File: app/View/PenTestReportFiles/csv/pen_test_report.ctp
$this->Html->setFull(true);

$data = array();
foreach ($pen_test_report_files as $i => $pen_test_report_file)
{
    $data[] = array(
		'PenTestReportFile.filename' => $pen_test_report_file['PenTestReportFile']['filename'],
		'PenTestReportFile.nicename' => $pen_test_report_file['PenTestReportFile']['nicename'],
		'PenTestReportFileState.name' => $pen_test_report_file['PenTestReportFileState']['name'],
		'PenTestReport.name' => $pen_test_report_file['PenTestReport']['name'],
		'PenTestReportFile.uri' => $this->Html->url(array('controller' => 'pen_test_report_files', 'action' => 'download', $pen_test_report_file['PenTestReportFile']['id'])),
    );
}

echo $this->Exporter->view($data, array('count' => count($data)), $this->request->params['ext'], Inflector::camelize(Inflector::singularize($this->request->params['controller'])), false, false);