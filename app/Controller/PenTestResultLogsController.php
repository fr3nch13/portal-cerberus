<?php
class PenTestResultLogsController extends AppController 
{

	public function pen_test_result($id = null) 
	{
		if (!$pen_test_result = $this->PenTestResultLog->PenTestResult->read(null, $id))
		{
			throw new NotFoundException(__('Invalid %s', __('Pen Test Result')));
		}
		$this->set('pen_test_result', $pen_test_result);
		
		$this->Prg->commonProcess();
		
		$conditions = array(
			'PenTestResultLog.pen_test_result_id' => $id,
		); 
		
		$this->paginate['conditions'] = $this->PenTestResultLog->conditions($conditions, $this->passedArgs); 
		if(isset($this->request->params['ext']) and $this->request->params['ext'] === 'csv')
		{
			$this->PenTestResultLog->recursive = -1;
			$this->paginate['limit'] = $this->PenTestResultLog->find('count', array('conditions' => $this->paginate['conditions']));
			$this->layout = 'Utilities.../ajax_nodebug';
		}
		
		$this->PenTestResultLog->recursive = 0;
		$this->set('pen_test_result_logs', $this->paginate());
	}
}